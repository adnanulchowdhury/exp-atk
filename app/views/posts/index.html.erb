<h1>Posts#index</h1>
<p>Find me in app/views/posts/index.html.erb</p>

<% @posts.each do |post| %>
    <li>
        <strong><%= post.title %></strong><br />
        <em><%= post.user.username %></em><br />
        <%= @markdown.render(post.content).html_safe() %><br />

        <%= link_to "Edit", edit_post_path(post.id) %>
        <%= link_to "Show", post_path(post.id) %>
        <%= link_to "Delete", post_path(post.id), method: :delete %>
    <li>
    <%= form_with model: @comment, local: true do |form| %>
        <%= form.text_area :content, placeholder: "content" %>
        <%= form.hidden_field :user_id, :value => current_user.id %><br />
        <%= form.hidden_field :post_id, :value => post.id%>
        <%= form.submit %>
    <% end %>

    <% @comments.each do |comment| %>
        <% if comment.post_id == post.id %>
            <%= comment.content %><br />
            <% if comment.user_id == current_user.id %>
               <p>by: <%= comment.user.email %> </p><br />
            <% end %>
        <%end%>
    <% end %>
<% end %>

<%= form_with model: @post, local: true do |form| %>
    <%= form.text_field :title, placeholder: "title" %><br />
    <%= form.text_area :content, placeholder: "content" %>
    <%= form.hidden_field :user_id, :value => current_user.id %><br />
    <%= form.hidden_field :game_id %>
    <%= form.submit %>
<% end %>